<app-head></app-head>
<app-category></app-category>

<div class="container mt-5">
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">{{ loadingMessage }}</p>
  </div>

  <!-- Product Details -->
  <div class="row product-details-holder"  *ngIf="!isLoading">
    <!-- Left Column (Product Image and Wishlist Icon) -->
    <div class="col-12 col-md-6 col-xl-5 text-center main card">
      <img [src]="product?.itemImage" alt="{{ product?.itemName }}" class="img-fluid product-img">
      <div
        class="wishlist-icon"
        role="button"
        [ngClass]="{ 'wishlist-added': product?.isInWishlist }"
        (click)="toggleWishlist(product)"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 20 16">
          <path
            [attr.fill]="product?.isInWishlist ? '#FF0000' : '#000000'"
            d="M8.695 16.682C4.06 12.382 1 9.536 1 6.065 1 3.219 3.178 1 5.95 1c1.566 0 3.069.746 4.05 1.915C10.981 1.745 12.484 1 14.05 1 16.822 1 19 3.22 19 6.065c0 3.471-3.06 6.316-7.695 10.617L10 17.897l-1.305-1.215z"
            stroke="#FFF"
            fill-rule="evenodd"
            opacity=".9"
          ></path>
        </svg>
      </div>
    </div>

    <!-- Right Column (Product Details, Price, Rating, Cart Button) -->
    <div class="col-12 col-md-6 col-xl-5 ms-md-4">
      <h1 class="product-title">{{ product?.itemName }}</h1>
      <p class="category-name">{{ product?.itemCategory }}</p>
      <p class="text-muted">{{ product?.itemDescription }}</p>

      <!-- Rating and Count -->
      <div class="rating-rate-holder mt-3 mb-2">
        <div class="rating-rate">
          {{product?.itemRatingRate}}
          <svg class="rating-star" xmlns="http://www.w3.org/2000/svg" width="13">
            <path fill="#fff" d="M6.5 9.439l-3.674 2.23.94-4.26-3.21-2.883 4.254-.404L6.5.112l1.69 4.01 4.254.404-3.21 2.882.94 4.26z"></path>
          </svg>
        </div>
        <div class="rating-count">({{product?.itemRatingCount}})</div>
        <div class="flipkart-assured">
          <img src="https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/fa_62673a.png" alt="flipkartAssured.png">
        </div>
      </div>

      <!-- Price -->
      <p class="price">₹{{product?.itemPrice}} <span class="original-price">₹ 10999</span></p>

      <!-- Cart Button -->
      <button class="btn btn-warning text-white btn-lg mt-3">
        <span *ngIf="!isAddedToCart" (click)="toggleCartAction()">Add to Cart</span>
        <span *ngIf="isAddedToCart" (click)="goToCart()">Go to Cart</span>
      </button>
    </div>
  </div>
</div>
